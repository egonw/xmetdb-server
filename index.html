<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Xmetdb-server by xmetdb</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Xmetdb-server</h1>
        <p>xmetdb web application</p>

        <p class="view"><a href="https://github.com/xmetdb/xmetdb-server">View the Project on GitHub <small>xmetdb/xmetdb-server</small></a></p>


        <ul>
          <li><a href="https://github.com/xmetdb/xmetdb-server/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/xmetdb/xmetdb-server/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/xmetdb/xmetdb-server">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h3>Welcome to XMETDB Pages.</h3>

<p>Under development.</p>

<h3>Authors and Contributors</h3>


  
<p>(<a href="https://github.com/vedina" class="user-mention">@vedina</a>), (<a href="https://github.com/kerberizer" class="user-mention">@kerberizer</a>), (<a href="https://github.com/olas" class="user-mention">@olas</a>)</p>
      </section>
      
<h3>Atom selection demo</h3>
  <table id="xmet_obs">
	<tr>
	<th align="right" height="150px">Substrate:</th>
	<td colspan="2">
	<!-- the picture -->
	<p id="structure1"/>
	</td>
	<td valign="bottom"  align="left">
		<label>Click on atoms to modify selection</label><br>
		<input type="text" id="xmet_substrate" readonly value="1">
	</td>
	</tr>
	<tr>
	<td colspan="4"></td>
	</tr>

	</table>
  
      <footer>
        <p>This project is maintained by <a href="https://github.com/xmetdb">xmetdb</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
    
  </body>
  
  <script>
  structure("#structure1","#xmet_substrate");
	
	function structure(svgtag,tag) {
  		var width = 200,
      	height = 200;
		var svg = d3.select(svgtag).append("svg")
      		.attr("width", width)
      		.attr("height", height);

		 svg.append("rect")
      		.attr("class", "background")
      		.attr("width", width)
      		.attr("height", height);
      		
        
          var link = svg.selectAll(".link")
        .data(molecule.bonds)
      	.enter().append("line")
        .attr("class", "bond")
        .attr("x1", function(d) { return 50+molecule.atoms[d["atoms"][0]]["x"]; })
        .attr("y1", function(d) { return 80+molecule.atoms[d["atoms"][0]]["y"]; })
        .attr("x2", function(d) { return 50+molecule.atoms[d["atoms"][1]]["x"]; })
        .attr("y2", function(d) { return 80+molecule.atoms[d["atoms"][1]]["y"]; })
        .style("stroke-width", function(d) { return Math.sqrt(d.value); });
        
               
         var node = svg.selectAll(".node")
        //.data(molecule.atoms)
 		.data(molecule.atoms.filter(function(d) {return d["atom"]; }))         
      	.enter().append("g")
        .attr("cx", function(d) { return 50+d["x"]; })
        .attr("cy", function(d) { return 80+d["y"]; });
        
        var circle =  node.append("circle")
	    .attr("class", "atom")
        .attr("cx", function(d) { return 50+d["x"]; })
        .attr("cy", function(d) { return 80+d["y"]; })
        .style("fill", function(d) { return d["selected"]?"red":"white"; })
        .attr("r", 12)
        ;
	        
		var text = node.append("text")
          .attr("x", function(d) { return 50+d["x"]; })
          .attr("y", function(d) { return 80+d["y"]; })
	      .attr("text-anchor", "end")
	      .text(function(d) { return d["id"]; });
    
       var anode = svg.selectAll(".atom")
			.on("click", function(d,i) {
				circle.filter(function (dd) { return dd == d;} )
				.style("fill",function (ddd) { 
					ddd["selected"] = !ddd["selected"]; 
					d3.select(tag).attr("value",ddd["selected"]?ddd["id"]:"");
					return ddd["selected"]?"red":"white"; 
					} 
				);
			});

	};
	</script>
</html>